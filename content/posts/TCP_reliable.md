---
title: "TCP的流量控制机制以及拥塞控制机制"
date: 2020-04-04T00:00:09+08:00
draft: true
---

## 流量控制机制

### 什么是流量控制？流量控制的目的？

如果发送者发送数据过快，接收者来不及接收，那么就会有分组丢失。为了避免分组丢失，控制发送者的发送速度，使得接收者来得及接收，这就是流量控制。流量控制根本目的是防止分组丢失，它是构成TCP可靠性的一方面。

### 如何实现流量控制

在TCP协议中，流量控制是通过滑动窗口协议来实现的。滑动窗口协议既保证了**分组无差错**、**有序接收**，也实现了**流量控制**。



### 滑动窗口之前

IP层协议属于不可靠的协议，IP层并不关心据是否发送到了对端，所以我们需要通过确认机制来保证数据传输的可靠性，在比较早的时候使用的是send--wait--send的模式，其实这种模式叫做stop-wait模式，发送数据方在发送数据之后会启动定时器，定时器到期之后，收不到ACK就认为发送出现状况，要进行重传。每次发一组数据都要等待收到ACK才会进行下一次发送，很明显这种方法传输效率会很低，如下图所示，这种方式被称为 positive acknowledgment with retransmission (PAR)

[![GwIyGT.png](https://s1.ax1x.com/2020/04/04/GwIyGT.png)](https://imgchr.com/i/GwIyGT)



### 滑动窗口的原理

所以TCP协议一般会一次发送很多个包，每个包都有一个序列号sequence number





